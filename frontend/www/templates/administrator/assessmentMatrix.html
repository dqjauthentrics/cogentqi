<ion-view view-title='Assessment Matrix'>
    <ion-nav-buttons side="left"><a data-ng-href="{{dashboardUrl()}}" data-ng-bind-html="installation.logo"></a></ion-nav-buttons>
    <ion-nav-buttons side="right"><a data-ng-click="logout()"><i class="logo {{i.signOut}}"></i></a></ion-nav-buttons>
    <ion-content has-bouncing="false">
        <!--div style="float:right; margin:1em 1em -1em -1em; font-size:2em;"><a ng-href='#pdfPrintMatrix' ng-click="foo = printIt()"><i
                class="{{i.pdf}}"></i></a>
        </div-->
        <div style="text-align:center; margin-top: 1em;">
            <h3>{{data.currentInstrument.name}}</h3>
            <h4>{{'Competency Summary Matrix'|translate}}</h4>
            <select style="margin-top:1em;" class="large" data-ng-model="data.currentInstrumentId"
                    data-ng-change="setCurrentInstrument(data.currentInstrumentId)"
                    data-ng-options="instrument.id as instrument.name for instrument in data.instruments">
            </select>
        </div>
        <div style="overflow: auto !important;" id="matrixWrapper">
            <table class="matrix" id="matrix">
                <thead>
                <tr>
                    <th style="font-style: italic;">Assessments</th>
                    <th class="rotate" data-ng-repeat="name in getColHeaderNames() track by $index">
                        <div><span>{{name}}</span></div>
                    </th>
                    <th class="rotate">
                        <div><span style="font-weight:bold; color:#555; font-style:italic;">{{'Averages'|translate}}</span></div>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr data-ng-repeat="dataRow in data.matrix">
                    <td class="leftHeader" data-ng-class="dataRow.organizationId == -1? 'average':''">
                        <a href="/#/administrator/organization/{{dataRow.organizationId}}">{{dataRow.name}}</a>
                    </td>
                    <td data-ng-repeat="response in getRowValues(dataRow) track by $index" data-ng-class="dataRow.organizationId == -1? 'average':''">
                        <div class="matrixCircle {{response.t == 'LIKERT'?'levelBg':'yesNoBg'}}{{response.r|number:0}}">{{response.r|number:1}}</div>
                    </td>
                    <td class="average">
                        <div class="matrixCircle {{data.currentInstrument.typeName == 'LIKERT'?'levelBg':'yesNoBg'}}{{dataRow.avgRound}}">{{dataRow.avg}}</div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="row row-responsive-sm">
            <div class="col col-40" style="text-align:right;">
                <div class="instrumentNavBtn pull-right"><a data-ng-click="previous()"><< {{previousName()|translate}}</a></div>
            </div>
            <div class="col col-10" style="text-align:center;">|</div>
            <div class="col col-40" style="text-align:left;">
                <div class="instrumentNavBtn pull-left"><a data-ng-click="next()">{{nextName()|translate}} >></a></div>
            </div>
        </div>
        <div class="row row-responsive-sm">
            <div class="col" style="text-align:center;">
                <a class="button" data-ng-if="!isAll()" data-ng-click="viewAll()">{{'View All Competencies'|translate}}</a>
                <a class="button" data-ng-if="!isSummary()" data-ng-click="viewSummary()">{{'View Section Summary'|translate}}</a>
            </div>
        </div>
    </ion-content>
</ion-view>
