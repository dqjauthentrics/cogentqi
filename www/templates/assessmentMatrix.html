<ion-view view-title='Assessment Matrix'>
    <ion-nav-buttons side="right">
        <a href="#tab/assessments" style="font-size:1.2em;">Assessments >></a>
    </ion-nav-buttons>
    <ion-content has-bouncing="false" overflow-scroll="true">
        <div style="text-align:center; margin-top: 1em;">
            <h2>Organization Overview as of {{'' | currentDateTime}}</h2>
        </div>
        <table class="matrix">
            <thead>
            <tr>
                <th style="font-style: italic;">Most Recent<br/>Employee Assessments</th>
                <td style="border:none;">
                    <table width="100%">
                        <tr>
                            <th class="rotate" data-ng-repeat="name in a.getMatrixCompetencyNames(e,20) track by $index">
                                <div><span>{{name}}</span></div>
                            </th>
                        </tr>
                    </table>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="employee in e.employees">
                <td class="leftHeader">
                    <img class="avatar-tiny" data-ng-src="{{employee.face}}" alt="">
                    <a href="#/tab/employees/{{employee.id}}">{{employee.name}}</a>
                </td>
                <td>
                    <table width="100%">
                        <tr>
                            <td data-ng-repeat="employeeCompetency in a.getMatrixCompetencies(employee)">
                                <i class="levelColor{{employeeCompetency.val}} {{i.icons.levels[employeeCompetency.val]}}"></i>
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="width:4em; border:none; background:#FFF !important;"></td>
            </tr>
            <tr>
                <th style="font-style: italic;">Averages</th>
                <td style="border:none;">
                    <table width="100%">
                        <tr>
                            <td data-ng-repeat="avg in a.getMatrixCompetencyAverages(e) track by $index">
                                <i class="levelColor{{avg}} {{i.icons.levels[avg]}}"></i>
                            </th>
                        </tr>
                    </table>
            </tr>
            </tbody>
        </table>
    </ion-content>
</ion-view>
